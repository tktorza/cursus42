{% extends 'ClabCallCenterBundle:Default:base.html.twig' %}

{% block body %}
    <div class="container">
        {% include 'ClabCallCenterBundle:Default:breadcrumb.html.twig' with { step: 'restaurant' } %}

        <br><br>
        <section class="panel">
            <div class="panel-body">
                <h2>3. Choix du restaurant</h2>

                <hr>
                <table class="table table-stripped table-bordered table-hover" id="datatable">
                    <thead>
                    <th class="search">Nom</th>
                    <th class="search">Adresse</th>
                    <th class="search">Distance</th>
                    <th class="search">Actions</th>
                    </thead>
                    <thead>
                    <th class="search">Nom</th>
                    <th class="search">Adresse</th>
                    <th class="search">Distance</th>
                    <th class="search">Actions</th>
                    </thead>
                    <tbody>
                    {% for restaurant in restaurants %}
                        <tr>
                            <td>
                                {{ restaurant[0].name }}
                            </td>
                            <td>
                                {{ restaurant[0].address }}
                            </td>
                            <td>   {{ restaurant['distance']|number_format(2) }} km</td>
                            <td>
                                <a href="{{ path('clab_call_center_choose_restaurant',{id : restaurant[0].id}) }}">
                                    Choisir
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>

                </table>
            </div>
        </section>
    </div>
{% endblock %}
{% block javascripts %}
    <script>
        // DataTable
        var table = $('#datatable').DataTable({
            responsive: true,
            "language": {
                "sProcessing":     "Traitement en cours...",
                "sSearch":         "Rechercher&nbsp;:",
                "sLengthMenu":     "Afficher _MENU_ &eacute;l&eacute;ments",
                "sInfo":           "Affichage de l'&eacute;l&eacute;ment _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",
                "sInfoEmpty":      "Affichage de l'&eacute;l&eacute;ment 0 &agrave; 0 sur 0 &eacute;l&eacute;ment",
                "sInfoFiltered":   "(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",
                "sInfoPostFix":    "",
                "sLoadingRecords": "Chargement en cours...",
                "sZeroRecords":    "Aucun &eacute;l&eacute;ment &agrave; afficher",
                "sEmptyTable":     "Aucune donn&eacute;e disponible dans le tableau",
                "oPaginate": {
                    "sFirst":      "Premier",
                    "sPrevious":   "Pr&eacute;c&eacute;dent",
                    "sNext":       "Suivant",
                    "sLast":       "Dernier"
                },
                "oAria": {
                    "sSortAscending":  ": activer pour trier la colonne par ordre croissant",
                    "sSortDescending": ": activer pour trier la colonne par ordre d&eacute;croissant"
                }
            }
        });

        table.columns().every( function () {
            var that = this;

            $( 'input', this.header() ).on( 'keyup change', function () {
                if ( that.search() !== this.value ) {
                    that
                            .search( this.value )
                            .draw();
                }
            } );
        } );

    </script>
{% endblock %}
